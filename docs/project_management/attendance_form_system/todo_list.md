# 电子考勤表功能 - 待办事项清单

## 需求分析阶段
- [x] 分析现有 AttendanceRecord 模型
- [x] 分析现有 EmployeePayroll 模型
- [x] 分析现有 DynamicForm 系统
- [x] 分析工资计算逻辑中如何使用考勤数据
- [x] 编写需求文档
- [ ] 与用户确认待确认问题
- [ ] 编写设计检查清单
- [ ] 编写测试用例

## 设计阶段
- [ ] 设计数据库迁移脚本
  - [ ] AttendanceRecord 新增字段
  - [ ] DynamicFormData 新增字段
- [ ] 设计考勤表单 SurveyJS Schema
- [ ] 设计 API 接口详细规格
- [ ] 设计前端页面原型

## 实现阶段

### 后端实现
- [ ] 数据库迁移
  - [ ] 创建迁移脚本
  - [ ] 执行迁移
  - [ ] 验证迁移结果
- [ ] 创建考勤表单模板
  - [ ] 在 DynamicForm 中创建考勤表模板
  - [ ] 配置表单字段和验证规则
- [ ] API 实现
  - [ ] 考勤表创建接口
  - [ ] 考勤表查询接口
  - [ ] 考勤表更新接口
  - [ ] 考勤表提交接口
  - [ ] 员工签署接口
  - [ ] 客户签署接口
  - [ ] PDF生成接口
  - [ ] 数据同步接口
- [ ] 业务逻辑实现
  - [ ] 考勤数据计算逻辑(时长转天数)
  - [ ] 签署流程控制
  - [ ] 数据同步到 AttendanceRecord
  - [ ] 触发工资单重算

### 前端实现
- [ ] 考勤表填写页面
  - [ ] SurveyJS 表单集成
  - [ ] 实时计算统计信息
  - [ ] 保存草稿功能
  - [ ] 提交验证
- [ ] 考勤表列表页面
  - [ ] 列表展示
  - [ ] 筛选功能
  - [ ] 状态标识
- [ ] 考勤表签署页面
  - [ ] PDF预览
  - [ ] 电子签名组件
  - [ ] 签署确认流程
- [ ] 工资单页面集成
  - [ ] 显示关联的考勤表
  - [ ] 考勤数据明细展示

## 测试阶段
- [ ] 单元测试
  - [ ] 考勤数据计算逻辑测试
  - [ ] 签署流程测试
  - [ ] 数据同步测试
- [ ] 集成测试
  - [ ] 完整流程测试(填写->签署->同步->工资计算)
  - [ ] 异常场景测试
- [ ] 用户验收测试
  - [ ] 员工填写考勤表
  - [ ] 双方签署流程
  - [ ] 工资单自动更新验证

## 部署与上线
- [ ] 数据库迁移执行
- [ ] 后端代码部署
- [ ] 前端代码部署
- [ ] 生产环境验证
- [ ] 用户培训
